---
title: "チーム期間限定異動1週間目"
date: 2018-08-04T21:37:40+09:00
draft: false
categories: ["Scala"]
tags: ["初心者"]
---

チーム異動して学んだことを書いていこうと思う。
異動先で使用している言語はScalaなので、

 - 一からScalaを覚えつつ
 - そのチームのやり方を覚えつつ
 - 将来的に自分のチームのプロダクトの機能が一部、異動先チームのプロダクトに移し替えとなるため、移し替えに関係ありそうな所を触りつつ…

 という形で最初は色々学びながら進める感じになりそうです。

<div align="center">
<img src="/images/scala-logo.png" "scalaロゴ">
</div>

# 1日目

1日目は計画ミーティング・面談・ざっくり全体を共有・アサインされるタスクの決定を行った。

- 計画ミーティングではタスクがどのように決まるかなどを見学していた。
  - 印象に残ったのは、月曜日の朝で眠いし元気が出ないから c2ミニを20分くらいやっていた事

面談では部署の開発責任者と面談して、今回の期間限定の異動で注目してほしい所を色々と教えてもらった。

 - 移動先のチームでは全員がオーナーシップを持って開発している
 - 自己組織化していて、開発責任者もほぼノータッチのチーム

ざっくり全体共有・タスクアサイン

 - プロダクトの目的、画面、機能の説明、内部コンポーネントのざっくりとした共有
 - 関わりたい（開発してみたい）コンポーネントのタスクをアサインしてもらった

アサインされたタスクは、ざっくり言うと「現在１つのファイルとして出力している部分を月単位で分割してzip出力する」タスク。

### 1日目の感想

Scalaの業務経験が無いけど、ガッツリScala書いてるチームへのジョインなのでこの先が若干不安。
Scalaレベル的にはflatMapをイマイチ理解してないレベル

例えばflatMapとmapの違いがわからない感じ。
java8のStreamのmapとかはわかるけど、scalaのmap関係のメソッドはそれと似てるけど違うものなので同じ名前だけど違うものを理解するのが少し辛い。

とりあえず、現時点で以下のように覚えた。

- flatMap: Optionなどの値から呼び出す。引数は「普通の値を取ってOption等を返す関数」を与える。
- map: Optionなどの値から呼び出す。引数は「普通の値を取って普通の値を返す関数」を与える。

flatMapについては、 (https://dev.classmethod.jp/server-side/scala-learn-flatmap/) この辺を見たりした。

難しい。。。

---

### 2日目

1日ほぼMTGで特にこれといった進捗は無かった。

以前Shinjuku.LTで「入社までにしておきたい事、入社後すぐにしたい事」という発表があった事を思い出し、発表して頂いた方からスライドを送っていただいた。

※今回は入社ではなく異動だけど、超参考になりました🙏 早速どういうビジョンなのかとかを教えて欲しいと申し出たりしました🙏

Shinjuku.LTについては こちら (https://www.shinjukult.tk/)

---

### 3日目

アサインして頂いたタスクを進めるにあたって、使用しているライブラリの使い方がわからなかったり、Scalaのお作法等がわからなかったりなど結構壁があるので、そこを学ぶ事をメインに進めた。

`Stream` を使う処理を書いていて、その部分の実装の相談をしたりなどした。（`Stream`自体はjavaでも使ってたのでこれについて相談しちゃってるのは完全に自分の実力不足。。。）

異動先チームでは Scalaのライブラリで `cats` や `fs2` が使われている。

`fs2` (https://github.com/functional-streams-for-scala/fs2) をチームで使っていて、処理の全体的な流れを教えて頂き、`unsafeRunSync()` するまではどんな処理も動かない構成となっている事を教えて頂いた。

また、異動先チームで「競技プログラミングを皆で解く会」なるものが2時間程設定されており、初参加した。
Scalaに慣れる練習として競技プログラミングのサイトで実際に問題を説いた。

http://judge.u-aizu.ac.jp/onlinejudge/review.jsp?rid=3070138#1

若干Scalaの書き方・自分の書いたコードのデバッグに慣れてきたかもしれない。

### 3日目の感想

1,2日目に比べてScalaに関して得られた情報量が多かった。

日に1回自分のコードを見てもらうようにしていて、その時間に得られるものが貴重な物が多くてとてもありがたい。

競技プログラミングのサイトは、問題が良い感じの難易度で設定されていて大量にあるので、それを解いていくだけで Scala力が上がりそうな気がした。

---

### 4日目

前日から引き続き時間をかけて1つのタスクに着手中となっている。

気持ち的にもう少し進捗進めても良い気がするけど、Scalaの基礎を取り込みたい気持ちもあるので、`Scala fiddle` （https://scalafiddle.io/） とかでどうしてこのコードが動くのか、という所などを色々追いつつ、実装もしてる感じ。
比率的には `3:7` で `実装:関連ある部分の勉強` という感じで進めてる。

`F[Unit]` や `IO` について色々教えて頂いて、理解を深める事ができた。
でも、なんとなくふわふわ感触がつかめたくらいでまだ言語化はできない。

この日は異動先チームのKPTがあった。

KPTの方法は元の自分のチームと同じで、スプレッドシートにそれぞれ5分〜10分で記入してその後発表し合う形となる。
このチームでは `KPT` だけに1時間かけており、約1時間で様々な話をした。

### 4日目の感想

一応Javaを触った事はあるけど（java8を半年くらいな経験値）Scalaの開発に活かせて無い感を実感してしまった。

Scala単体の機能とライブラリの機能の切り分けがとてもなんとなく感触が掴めてきた気がする。

アサインしてもらったタスクの実装も折り返しに差し掛かってきた感じで初心者にしては悪すぎる進捗ではないと信じたい。

---

### 5日目

この日はタスクの消化をメインに行った。

複数出力したファイルを zip化するという処理を Scalaで書く必要があったが、zip化するための簡単なライブラリを使いたかったので有名所を探して提案し、導入してもらった。

選定の基準は特に無いらしく、スター数あるしまあ大丈夫じゃないかなという感じだった。

それがこちら `better-files` (https://github.com/pathikrit/better-files)

```example.scala
val dir = Paths.get("~/圧縮したいディレクトリ")
val i   = better.files.File(dir).walk(1).filter(f => f.toJava.isFile)
val zip = better.files
  .File("zipファイル.zip")
  .delete(true)
  .createIfNotExists()
zip.zipIn(i)
// zip.toJava で java.io.File も取れる
```

上記のような感じで、簡単に zipファイルが作成可能なライブラリだった。

アサインされたタスクのプルリク作る所まで完了したので、来週見ていただいてレビューをしていただこうと思う。

### 5日目の感想

`better-files` が便利に使えそう。

はじめての Scalaなのでプルリクで沢山指摘を頂くかもしれないけど、そこでまたチームの方向性とかを感じ取れたらと思う。

---

### 今週の感想

今まで経験した事が無い事をやっているので、この会社に入社して1,2を争うくらいのレベルの成長実感を感じる。

記事中 3日目に書いた http://judge.u-aizu.ac.jp/ とかで引き続き勉強していきたいと思う。

#### Scala

Javaに比べてデバッグしやすい。

自分は開発にInteliJを使っていて、今は規模がそんなに大きくない部分に携わる事もあってか、 `Scala Console` で静的なメソッドを作って実際に呼び出して確認しつつコードを書くという感じでやってる。

「テスト書けば事足りるじゃん」となるかもしれないけど、テストコードが無いリポジトリなので今一旦はそうしてる。
